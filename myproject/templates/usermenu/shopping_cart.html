<div class="w-full mt-4">
  <div class="">
    <div
      class="flex flex-col w-full border-2 border-gray-700 rounded-[10px] px-2"
    >
      <h2 class="font-title-xl">Carrito</h2>
      <div class="overflow-x-auto">
        <table class="table-auto w-full">
          <thead>
            <tr>
              <th class="py-2 px-4 border-b"></th>
              <th class="py-2 px-4 border-b text-left">Item</th>
              <th class="py-2 px-4 border-b text-left">Cantidad</th>
              <th class="py-2 px-4 border-b text-left">Precio</th>
              <th class="py-2 px-4 border-b text-left">Total</th>
            </tr>
          </thead>
          <tbody id="cart-table-body">
            {% for item in rows %}
            <tr id="cart-item-{{ item.product.id }}">
              <td class="py-2 px-4 border-b text-center">
                <button
                  hx-delete="{% url 'remove_from_cart' item.product.id_product %}"
                  hx-trigger="click"
                  hx-target="#shopping_cart"
                  hx-swap="innerHTML"
                  class="text-red-500 cursor-pointer"
                >
                  <!-- Trash Icon SVG -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3m-4 0h14"
                    />
                  </svg>
                </button>
              </td>
              <td class="py-2 px-4 border-b">{{ item.product.name }}</td>
              <td class="py-2 px-4 border-b">
                <input
                  type="number"
                  min="1"
                  value="{{ item.quantity }}"
                  class="cart-item-quantity-input w-16 text-center border border-gray-300 rounded-md"
                  hx-post="{% url 'add_to_cart' item.product.id_product %}"
                  hx-trigger="change"
                  hx-params="value"
                  hx-swap="outerHTML"
                />
              </td>
              <td class="py-2 px-4 border-b">
                {{ item.product.price }}
              </td>
              <td class="py-2 px-4 border-b cart-item-total">
                {{ item.subtotal }}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="py-2 px-4 text-center">
                Your cart is empty.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <!-- Cart Total -->
      <div class="flex justify-end mt-4">
        <p class="text-xl font-bold">
          Total: <span id="cart-total">{{ subtotal }}</span>
        </p>
      </div>
    </div>
  </div>
</div>
